import{d as M,i as b,r as _,u as E,a2 as I,f as U,_ as P,j as r,t as c,s as t,q as a,a3 as N,m as s,F as g,k as n,y as l,l as j,E as d,D as q,v as F,I as O}from"./app-9yHSs_0k.js";import{f as z}from"./functions-BhiSqBls.js";import{R as H}from"./recipe-book.service-D-CAdHjl.js";const T=M({name:"RecipeBookCard",components:{},props:{recipeBook:{type:Object,required:!0},removeFromRecipeBooks:{type:Function,required:!1},showOptions:{type:Boolean,required:!1},showUser:{type:Boolean,required:!1,default:!0}},setup(){const e=b("recipeBookService",()=>new H),o=b("alertService",()=>U(),!0),m=_(!1);return{editRecipeBookData:_({}),recipeBookService:e,alertService:o,editRecipeBookModal:m,t$:E().t}},computed:{functions(){return z}},mounted(){var e,o;this.getAvatarImg((o=(e=this.recipeBook)==null?void 0:e.user)==null?void 0:o.avatar)},methods:{getAvatarImg:e=>z.getAvatarImg(e),confirmDeleting(e){I(null,{title:"Are you sure?",description:"We will delete it permanently, you can't undo it afterwards",onOk:()=>this.deleteRecipeBook(e)})},deleteRecipeBook(e){this.recipeBookService().delete(e).then(o=>{o.status==204&&(this.removeFromRecipeBooks(e),this.alertService.showSuccess("Successfully deleted!"))})},editRecipeBook(){this.recipeBookService().partialUpdate(this.editRecipeBookData).then(()=>{this.alertService.showSuccess("Successfully updated!")}).catch(e=>{this.alertService.showError("Something went wrong")})},closeEditRecipeModal(){this.editRecipeBookModal=!1},openEditRecipeModal(e){this.editRecipeBookModal=!0,this.editRecipeBookData=e}}}),L={class:"recipe-book-card"},W={class:"text-slate-900 position-relative h-100 d-flex flex-column"},G={class:"trun two-line",style:{"font-size":"18px"}},J={class:"trun four-line"},K={class:"recipe-images grid-images mb-3"},Q=["src"],X={class:"mt-4 d-flex gap mt-auto mb-0"},Y={class:"d-flex align-items-center creator"},Z={class:"ml-1 mt-3 ml-2 text-slate-900 white-hover"},x={for:"title"},ee={class:"mt-3"},oe={for:"theme"},te={class:"mt-3"},ie={for:"description"},ae={class:"my-3"},se={for:"isPrivate"},le={class:"d-flex justify-content-end"};function re(e,o,m,R,de,ne){const u=r("b-dropdown-item"),w=r("b-dropdown"),p=r("b-button"),y=r("b-avatar"),$=r("router-link"),A=r("b-card"),k=r("b-form-input"),S=r("b-form-textarea"),f=r("b-form-select-option"),V=r("b-form-select"),D=r("b-form"),C=r("b-modal");return n(),c(g,null,[t("div",L,[a(A,{style:{color:"#212529"},class:"h-100"},N({default:s(()=>[t("div",W,[e.showOptions?(n(),j(w,{key:0,size:"sm",variant:"secondary",text:"",class:"position-absolute",style:{right:"0"}},{default:s(()=>[a(u,{onClick:o[0]||(o[0]=i=>e.openEditRecipeModal(e.recipeBook))},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.card.edit")),1)]),_:1}),a(u,{variant:"danger",onClick:o[1]||(o[1]=i=>e.confirmDeleting(e.recipeBook.id))},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.card.delete")),1)]),_:1})]),_:1})):q("",!0),t("strong",G,l(e.recipeBook.title),1),t("p",J,l(e.recipeBook.description),1),t("div",K,[(n(!0),c(g,null,F(e.recipeBook.recipeImages,i=>(n(),c("div",{key:i,style:{"flex-grow":"1"}},[t("img",{src:i,alt:"Img",style:{width:"100%",height:"50px","object-fit":"cover"}},null,8,Q)]))),128))]),t("div",X,[a(p,{href:"/recipe-book/"+e.recipeBook.id+"/view",class:"w-100"},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.card.check")),1)]),_:1},8,["href"])])])]),_:2},[e.showUser?{name:"footer",fn:s(()=>{var i;return[a($,{to:`/profile-view/${(i=e.recipeBook.user)==null?void 0:i.login}/view`,class:"w-100 text-decoration-none"},{default:s(()=>{var B,v,h;return[t("div",Y,[a(y,{src:e.getAvatarImg((B=e.recipeBook.user)==null?void 0:B.avatar),size:"sm"},null,8,["src"]),t("p",Z,l(((v=e.recipeBook.user)==null?void 0:v.firstName)+" "+((h=e.recipeBook.user)==null?void 0:h.lastName)),1)])]}),_:1},8,["to"])]}),key:"0"}:void 0]),1024)]),a(C,{modelValue:e.editRecipeBookModal,"onUpdate:modelValue":o[6]||(o[6]=i=>e.editRecipeBookModal=i),onClose:e.closeEditRecipeModal,"hide-footer":"",title:e.t$("szakdolgozatApp.recipeBook.modal.editTitle")},{default:s(()=>[a(D,{onSubmit:O(e.editRecipeBook,["prevent"])},{default:s(()=>[t("div",null,[t("label",x,l(e.t$("szakdolgozatApp.recipeBook.modal.name")),1),a(k,{id:"title",modelValue:e.editRecipeBookData.title,"onUpdate:modelValue":o[2]||(o[2]=i=>e.editRecipeBookData.title=i),placeholder:e.t$("szakdolgozatApp.recipeBook.modal.namePH")},null,8,["modelValue","placeholder"])]),t("div",ee,[t("label",oe,l(e.t$("szakdolgozatApp.recipeBook.modal.theme")),1),a(k,{id:"theme",modelValue:e.editRecipeBookData.theme,"onUpdate:modelValue":o[3]||(o[3]=i=>e.editRecipeBookData.theme=i),placeholder:e.t$("szakdolgozatApp.recipeBook.modal.themePH")},null,8,["modelValue","placeholder"])]),t("div",te,[t("label",ie,l(e.t$("szakdolgozatApp.recipeBook.modal.description")),1),a(S,{type:"textarea",id:"description",modelValue:e.editRecipeBookData.description,"onUpdate:modelValue":o[4]||(o[4]=i=>e.editRecipeBookData.description=i),placeholder:e.t$("szakdolgozatApp.recipeBook.modal.descriptionPH")},null,8,["modelValue","placeholder"])]),t("div",ae,[t("label",se,l(e.t$("szakdolgozatApp.recipeBook.modal.visibility")),1),a(V,{id:"isPrivate",modelValue:e.editRecipeBookData.isPrivate,"onUpdate:modelValue":o[5]||(o[5]=i=>e.editRecipeBookData.isPrivate=i)},{default:s(()=>[a(f,{value:!0},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.modal.private")),1)]),_:1}),a(f,{value:!1},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.modal.public")),1)]),_:1})]),_:1},8,["modelValue"])]),t("div",le,[a(p,{type:"button",onClick:e.closeEditRecipeModal,variant:"secondary"},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.modal.cancel")),1)]),_:1},8,["onClick"]),a(p,{type:"submit",variant:"primary",class:"ml-2"},{default:s(()=>[d(l(e.t$("szakdolgozatApp.recipeBook.modal.update")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["modelValue","onClose","title"])],64)}const ue=P(T,[["render",re],["__scopeId","data-v-8cf37b3b"]]);export{ue as R};
