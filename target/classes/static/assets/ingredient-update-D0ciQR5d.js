import{d as B,i as c,r as p,B as L,C as R,u as M,f as j,c as D,_ as H,j as N,t as a,s as n,I as F,y as o,K as d,L as $,D as O,M as h,O as C,F as z,v as k,q as w,E as I,k as r}from"./app-9yHSs_0k.js";import{u as T}from"./index-CQAvtwPr.js";import{I as q}from"./ingredient.service-BzC0g82u.js";import{I as K}from"./instruction.service-CKgwal-l.js";import{U as G}from"./unit.model-CaFlzA60.js";class J{constructor(e,s,u,l,v){this.id=e,this.name=s,this.amount=u,this.unit=l,this.instruction=v}}const P=B({compatConfig:{MODE:3},name:"IngredientUpdate",setup(){var y;const t=c("ingredientService",()=>new q),e=c("alertService",()=>j(),!0),s=p(new J),u=c("instructionService",()=>new K),l=p([]),v=p(Object.keys(G)),m=p(!1),i=c("currentLanguage",()=>D(()=>navigator.language??"en"),!0),S=L(),V=R(),U=()=>V.go(-1),A=async g=>{try{const f=await t().find(g);s.value=f}catch(f){e.showHttpError(f.response)}};(y=S.params)!=null&&y.ingredientId&&A(S.params.ingredientId),(()=>{u().retrieve().then(g=>{l.value=g.data})})();const{t:E}=M(),b=T({name:{},amount:{},unit:{},instruction:{}},s);return b.value.$validate(),{ingredientService:t,alertService:e,ingredient:s,previousState:U,unitValues:v,isSaving:m,currentLanguage:i,instructions:l,v$:b,t$:E}},created(){},methods:{save(){this.isSaving=!0,this.ingredient.id?this.ingredientService().update(this.ingredient).then(t=>{this.isSaving=!1,this.previousState(),this.alertService.showInfo(this.t$("szakdolgozatApp.ingredient.updated",{param:t.id}))}).catch(t=>{this.isSaving=!1,this.alertService.showHttpError(t.response)}):this.ingredientService().create(this.ingredient).then(t=>{this.isSaving=!1,this.previousState(),this.alertService.showSuccess(this.t$("szakdolgozatApp.ingredient.created",{param:t.id}).toString())}).catch(t=>{this.isSaving=!1,this.alertService.showHttpError(t.response)})}}}),Q={class:"row justify-content-center"},W={class:"col-8"},X=["textContent"],Y={key:0,class:"form-group"},Z=["textContent"],_={class:"form-group"},x=["textContent"],tt={class:"form-group"},et=["textContent"],nt={class:"form-group"},it=["textContent"],ot=["value","label"],st={class:"form-group"},at=["textContent"],rt=["value"],lt=["textContent"],dt=["disabled"],ut=["textContent"];function vt(t,e,s,u,l,v){const m=N("font-awesome-icon");return r(),a("div",Q,[n("div",W,[n("form",{name:"editForm",novalidate:"",onSubmit:e[6]||(e[6]=F(i=>t.save(),["prevent"]))},[n("h2",{id:"szakdolgozatApp.ingredient.home.createOrEditLabel","data-cy":"IngredientCreateUpdateHeading",textContent:o(t.t$("szakdolgozatApp.ingredient.home.createOrEditLabel"))},null,8,X),n("div",null,[t.ingredient.id?(r(),a("div",Y,[n("label",{for:"id",textContent:o(t.t$("global.field.id"))},null,8,Z),d(n("input",{type:"text",class:"form-control",id:"id",name:"id","onUpdate:modelValue":e[0]||(e[0]=i=>t.ingredient.id=i),readonly:""},null,512),[[$,t.ingredient.id]])])):O("",!0),n("div",_,[n("label",{class:"form-control-label",textContent:o(t.t$("szakdolgozatApp.ingredient.name")),for:"ingredient-name"},null,8,x),d(n("input",{type:"text",class:h(["form-control",{valid:!t.v$.name.$invalid,invalid:t.v$.name.$invalid}]),name:"name",id:"ingredient-name","data-cy":"name","onUpdate:modelValue":e[1]||(e[1]=i=>t.v$.name.$model=i)},null,2),[[$,t.v$.name.$model]])]),n("div",tt,[n("label",{class:"form-control-label",textContent:o(t.t$("szakdolgozatApp.ingredient.amount")),for:"ingredient-amount"},null,8,et),d(n("input",{type:"number",class:h(["form-control",{valid:!t.v$.amount.$invalid,invalid:t.v$.amount.$invalid}]),name:"amount",id:"ingredient-amount","data-cy":"amount","onUpdate:modelValue":e[2]||(e[2]=i=>t.v$.amount.$model=i)},null,2),[[$,t.v$.amount.$model,void 0,{number:!0}]])]),n("div",nt,[n("label",{class:"form-control-label",textContent:o(t.t$("szakdolgozatApp.ingredient.unit")),for:"ingredient-unit"},null,8,it),d(n("select",{class:h(["form-control",{valid:!t.v$.unit.$invalid,invalid:t.v$.unit.$invalid}]),name:"unit","onUpdate:modelValue":e[3]||(e[3]=i=>t.v$.unit.$model=i),id:"ingredient-unit","data-cy":"unit"},[(r(!0),a(z,null,k(t.unitValues,i=>(r(),a("option",{key:i,value:i,label:t.t$("szakdolgozatApp.Unit."+i)},o(i),9,ot))),128))],2),[[C,t.v$.unit.$model]])]),n("div",st,[n("label",{class:"form-control-label",textContent:o(t.t$("szakdolgozatApp.ingredient.instruction")),for:"ingredient-instruction"},null,8,at),d(n("select",{class:"form-control",id:"ingredient-instruction","data-cy":"instruction",name:"instruction","onUpdate:modelValue":e[4]||(e[4]=i=>t.ingredient.instruction=i)},[e[7]||(e[7]=n("option",{value:null},null,-1)),(r(!0),a(z,null,k(t.instructions,i=>(r(),a("option",{value:t.ingredient.instruction&&i.id===t.ingredient.instruction.id?t.ingredient.instruction:i,key:i.id},o(i.id),9,rt))),128))],512),[[C,t.ingredient.instruction]])])]),n("div",null,[n("button",{type:"button",id:"cancel-save","data-cy":"entityCreateCancelButton",class:"btn btn-secondary",onClick:e[5]||(e[5]=i=>t.previousState())},[w(m,{icon:"ban"}),e[8]||(e[8]=I(" ")),n("span",{textContent:o(t.t$("entity.action.cancel"))},null,8,lt)]),n("button",{type:"submit",id:"save-entity","data-cy":"entityCreateSaveButton",disabled:t.v$.$invalid||t.isSaving,class:"btn btn-primary"},[w(m,{icon:"save"}),e[9]||(e[9]=I(" ")),n("span",{textContent:o(t.t$("entity.action.save"))},null,8,ut)],8,dt)])],32)])])}const St=H(P,[["render",vt]]);export{St as default};
