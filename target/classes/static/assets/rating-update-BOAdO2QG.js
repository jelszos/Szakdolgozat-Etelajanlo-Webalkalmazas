import{d as B,i as p,r as c,B as F,C as L,u as I,f as M,c as H,_ as N,j as T,t as r,s as t,I as j,y as n,K as o,L as g,D as q,M as m,O as b,F as z,v as U,q as D,E as k,k as s}from"./app-DpqgLFQi.js";import{u as K}from"./index-BKG5m1Gr.js";import{R as Z}from"./rating.service-CU5U_PbT.js";import{u as G}from"./date-format-rfZit4qg.js";import{U as J}from"./user.service-DYWiY2RY.js";import{R as P}from"./recipe.service-Bi-8z6n7.js";import{R as Q}from"./rating.model-C9oCRbPj.js";const W=B({compatConfig:{MODE:3},name:"RatingUpdate",setup(){var C;const e=p("ratingService",()=>new Z),a=p("alertService",()=>M(),!0),l=c(new Q),$=p("userService",()=>new J),f=c([]),h=p("recipeService",()=>new P),d=c([]),i=c(!1),w=p("currentLanguage",()=>H(()=>navigator.language??"en"),!0),S=F(),R=L(),A=()=>R.go(-1),V=async u=>{try{const v=await e().find(u);v.createdDate=new Date(v.createdDate),l.value=v}catch(v){a.showHttpError(v.response)}};(C=S.params)!=null&&C.ratingId&&V(S.params.ratingId),(()=>{$().retrieve().then(u=>{f.value=u.data}),h().retrieve().then(u=>{d.value=u.data})})();const{t:E}=I(),y=K({rate:{},title:{},description:{},imageUrl:{},createdDate:{},user:{},recipe:{}},l);return y.value.$validate(),{ratingService:e,alertService:a,rating:l,previousState:A,isSaving:i,currentLanguage:w,users:f,recipes:d,v$:y,...G({entityRef:l}),t$:E}},created(){},methods:{save(){this.isSaving=!0,this.rating.id?this.ratingService().update(this.rating).then(e=>{this.isSaving=!1,this.previousState(),this.alertService.showInfo(this.t$("szakdolgozatApp.rating.updated",{param:e.id}))}).catch(e=>{this.isSaving=!1,this.alertService.showHttpError(e.response)}):this.ratingService().create(this.rating).then(e=>{this.isSaving=!1,this.previousState(),this.alertService.showSuccess(this.t$("szakdolgozatApp.rating.created",{param:e.id}).toString())}).catch(e=>{this.isSaving=!1,this.alertService.showHttpError(e.response)})}}}),X={class:"row justify-content-center"},Y={class:"col-8"},O=["textContent"],_={key:0,class:"form-group"},x=["textContent"],ee={class:"form-group"},te=["textContent"],ae={class:"form-group"},ie=["textContent"],ne={class:"form-group"},oe=["textContent"],re={class:"form-group"},se=["textContent"],le={class:"form-group"},de=["textContent"],ue={class:"d-flex"},ve=["value"],pe={class:"form-group"},ge=["textContent"],me=["value"],ce={class:"form-group"},fe=["textContent"],$e=["value"],he=["textContent"],Se=["disabled"],ye=["textContent"];function Ce(e,a,l,$,f,h){const d=T("font-awesome-icon");return s(),r("div",X,[t("div",Y,[t("form",{name:"editForm",novalidate:"",onSubmit:a[9]||(a[9]=j(i=>e.save(),["prevent"]))},[t("h2",{id:"szakdolgozatApp.rating.home.createOrEditLabel","data-cy":"RatingCreateUpdateHeading",textContent:n(e.t$("szakdolgozatApp.rating.home.createOrEditLabel"))},null,8,O),t("div",null,[e.rating.id?(s(),r("div",_,[t("label",{for:"id",textContent:n(e.t$("global.field.id"))},null,8,x),o(t("input",{type:"text",class:"form-control",id:"id",name:"id","onUpdate:modelValue":a[0]||(a[0]=i=>e.rating.id=i),readonly:""},null,512),[[g,e.rating.id]])])):q("",!0),t("div",ee,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.rate")),for:"rating-rate"},null,8,te),o(t("input",{type:"number",class:m(["form-control",{valid:!e.v$.rate.$invalid,invalid:e.v$.rate.$invalid}]),name:"rate",id:"rating-rate","data-cy":"rate","onUpdate:modelValue":a[1]||(a[1]=i=>e.v$.rate.$model=i)},null,2),[[g,e.v$.rate.$model,void 0,{number:!0}]])]),t("div",ae,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.title")),for:"rating-title"},null,8,ie),o(t("input",{type:"text",class:m(["form-control",{valid:!e.v$.title.$invalid,invalid:e.v$.title.$invalid}]),name:"title",id:"rating-title","data-cy":"title","onUpdate:modelValue":a[2]||(a[2]=i=>e.v$.title.$model=i)},null,2),[[g,e.v$.title.$model]])]),t("div",ne,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.description")),for:"rating-description"},null,8,oe),o(t("input",{type:"text",class:m(["form-control",{valid:!e.v$.description.$invalid,invalid:e.v$.description.$invalid}]),name:"description",id:"rating-description","data-cy":"description","onUpdate:modelValue":a[3]||(a[3]=i=>e.v$.description.$model=i)},null,2),[[g,e.v$.description.$model]])]),t("div",re,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.imageUrl")),for:"rating-imageUrl"},null,8,se),o(t("input",{type:"text",class:m(["form-control",{valid:!e.v$.imageUrl.$invalid,invalid:e.v$.imageUrl.$invalid}]),name:"imageUrl",id:"rating-imageUrl","data-cy":"imageUrl","onUpdate:modelValue":a[4]||(a[4]=i=>e.v$.imageUrl.$model=i)},null,2),[[g,e.v$.imageUrl.$model]])]),t("div",le,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.createdDate")),for:"rating-createdDate"},null,8,de),t("div",ue,[t("input",{id:"rating-createdDate","data-cy":"createdDate",type:"datetime-local",class:m(["form-control",{valid:!e.v$.createdDate.$invalid,invalid:e.v$.createdDate.$invalid}]),name:"createdDate",value:e.convertDateTimeFromServer(e.v$.createdDate.$model),onChange:a[5]||(a[5]=i=>e.updateZonedDateTimeField("createdDate",i))},null,42,ve)])]),t("div",pe,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.user")),for:"rating-user"},null,8,ge),o(t("select",{class:"form-control",id:"rating-user","data-cy":"user",name:"user","onUpdate:modelValue":a[6]||(a[6]=i=>e.rating.user=i)},[a[10]||(a[10]=t("option",{value:null},null,-1)),(s(!0),r(z,null,U(e.users,i=>(s(),r("option",{value:e.rating.user&&i.id===e.rating.user.id?e.rating.user:i,key:i.id},n(i.id),9,me))),128))],512),[[b,e.rating.user]])]),t("div",ce,[t("label",{class:"form-control-label",textContent:n(e.t$("szakdolgozatApp.rating.recipe")),for:"rating-recipe"},null,8,fe),o(t("select",{class:"form-control",id:"rating-recipe","data-cy":"recipe",name:"recipe","onUpdate:modelValue":a[7]||(a[7]=i=>e.rating.recipe=i)},[a[11]||(a[11]=t("option",{value:null},null,-1)),(s(!0),r(z,null,U(e.recipes,i=>(s(),r("option",{value:e.rating.recipe&&i.id===e.rating.recipe.id?e.rating.recipe:i,key:i.id},n(i.id),9,$e))),128))],512),[[b,e.rating.recipe]])])]),t("div",null,[t("button",{type:"button",id:"cancel-save","data-cy":"entityCreateCancelButton",class:"btn btn-secondary",onClick:a[8]||(a[8]=i=>e.previousState())},[D(d,{icon:"ban"}),a[12]||(a[12]=k(" ")),t("span",{textContent:n(e.t$("entity.action.cancel"))},null,8,he)]),t("button",{type:"submit",id:"save-entity","data-cy":"entityCreateSaveButton",disabled:e.v$.$invalid||e.isSaving,class:"btn btn-primary"},[D(d,{icon:"save"}),a[13]||(a[13]=k(" ")),t("span",{textContent:n(e.t$("entity.action.save"))},null,8,ye)],8,Se)])],32)])])}const Ee=N(W,[["render",Ce]]);export{Ee as default};
