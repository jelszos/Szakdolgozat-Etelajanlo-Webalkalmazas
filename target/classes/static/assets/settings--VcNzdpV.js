import{d as E,G as _,r as m,c as p,i as M,N as q,u as D,J as K,_ as R,j as A,t as s,s as n,D as o,I as V,y as l,K as d,L as y,M as g,q as I,m as O,O as S,F as N,v as C,k as e,l as T}from"./app-DpqgLFQi.js";import{u as U}from"./index-BKG5m1Gr.js";import{r as b,m as k,a as L}from"./index-DIr-dopr.js";import{E as j,f as w}from"./functions-BsjzqxxS.js";const B={settingsAccount:{firstName:{required:b,minLength:k(1),maxLength:L(50)},lastName:{required:b,minLength:k(1),maxLength:L(50)}}},H=E({compatConfig:{MODE:3},name:"Settings",validations:B,setup(){const t=_(),i=m(null),v=m(null),h=m(null),f=p(()=>t.account),$=M("currentUsername",()=>p(()=>{var a;return(a=t.account)==null?void 0:a.login}),!0),u=m([]),c=m(0);return{success:i,error:v,errorEmailExists:h,settingsAccount:f,username:$,avatarImages:u,selectedAvatar:c,v$:U(),languages:q(),t$:D().t}},mounted(){this.loadAvatars(),this.selectAvatar()},methods:{save(){return this.error=null,this.errorEmailExists=null,K.post("api/account",this.settingsAccount).then(()=>{this.error=null,this.success="OK",this.errorEmailExists=null}).catch(t=>{this.success=null,this.error="ERROR",t.response.status===400&&t.response.data.type===j&&(this.errorEmailExists="ERROR",this.error=null)})},loadAvatars(){this.avatarImages=w.getAllAvatarImgs()},selectAvatar(t){if(this.selectedAvatar==0&&t==null){this.selectedAvatar=this.settingsAccount.avatar;return}else{this.selectedAvatar=t,this.settingsAccount.avatar=t;return}}}}),z={class:"row justify-content-center"},F={class:"col-md-8 toastify-container"},Y={key:0,id:"settings-title"},x=["innerHTML"],G=["innerHTML"],J={class:"form-group"},P=["textContent"],Q=["placeholder"],W={key:0},X=["textContent"],Z=["textContent"],tt=["textContent"],et={class:"form-group"},st=["textContent"],nt=["placeholder"],at={key:0},ot=["textContent"],lt=["textContent"],it=["textContent"],rt={class:"form-group avatar-selector"},mt={class:"avatars"},ut={key:0,class:"form-group"},ct=["textContent"],dt=["value"],gt=["disabled","textContent"];function vt(t,i,v,h,f,$){const u=A("b-avatar"),c=A("b-avatar-group");return e(),s("div",null,[n("div",z,[n("div",F,[t.username?(e(),s("h2",Y,[n("span",{innerHTML:t.t$("settings.title",{username:t.username})},null,8,x)])):o("",!0),t.success?(e(),s("div",{key:1,class:"alert alert-success",role:"alert",innerHTML:t.t$("settings.messages.success")},null,8,G)):o("",!0),t.settingsAccount?(e(),s("form",{key:2,name:"form",id:"settings-form",onSubmit:i[3]||(i[3]=V(a=>t.save(),["prevent"])),novalidate:""},[n("div",J,[n("label",{class:"form-control-label",for:"firstName",textContent:l(t.t$("settings.form.firstname"))},null,8,P),d(n("input",{type:"text",class:g(["form-control",{valid:!t.v$.settingsAccount.firstName.$invalid,invalid:t.v$.settingsAccount.firstName.$invalid}]),id:"firstName",name:"firstName",placeholder:t.t$("settings.form['firstname.placeholder']"),"onUpdate:modelValue":i[0]||(i[0]=a=>t.v$.settingsAccount.firstName.$model=a),minlength:"1",maxlength:"50",required:"","data-cy":"firstname"},null,10,Q),[[y,t.v$.settingsAccount.firstName.$model]]),t.v$.settingsAccount.firstName.$anyDirty&&t.v$.settingsAccount.firstName.$invalid?(e(),s("div",W,[t.v$.settingsAccount.firstName.required?o("",!0):(e(),s("small",{key:0,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.firstname.required"))},null,8,X)),t.v$.settingsAccount.firstName.minLength?o("",!0):(e(),s("small",{key:1,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.firstname.minlength"))},null,8,Z)),t.v$.settingsAccount.firstName.maxLength?o("",!0):(e(),s("small",{key:2,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.firstname.maxlength"))},null,8,tt))])):o("",!0)]),n("div",et,[n("label",{class:"form-control-label",for:"lastName",textContent:l(t.t$("settings.form.lastname"))},null,8,st),d(n("input",{type:"text",class:g(["form-control",{valid:!t.v$.settingsAccount.lastName.$invalid,invalid:t.v$.settingsAccount.lastName.$invalid}]),id:"lastName",name:"lastName",placeholder:t.t$("settings.form['lastname.placeholder']"),"onUpdate:modelValue":i[1]||(i[1]=a=>t.v$.settingsAccount.lastName.$model=a),minlength:"1",maxlength:"50",required:"","data-cy":"lastname"},null,10,nt),[[y,t.v$.settingsAccount.lastName.$model]]),t.v$.settingsAccount.lastName.$anyDirty&&t.v$.settingsAccount.lastName.$invalid?(e(),s("div",at,[t.v$.settingsAccount.lastName.required?o("",!0):(e(),s("small",{key:0,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.lastname.required"))},null,8,ot)),t.v$.settingsAccount.lastName.minLength?o("",!0):(e(),s("small",{key:1,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.lastname.minlength"))},null,8,lt)),t.v$.settingsAccount.lastName.maxLength?o("",!0):(e(),s("small",{key:2,class:"form-text text-danger",textContent:l(t.t$("settings.messages.validate.lastname.maxlength"))},null,8,it))])):o("",!0)]),n("div",rt,[n("h3",null,l(t.t$("settings.form.selectavatar")),1),n("div",mt,[I(c,null,{default:O(()=>[(e(!0),s(N,null,C(t.avatarImages,(a,r)=>(e(),T(u,{key:r,src:a,class:g({selected:t.selectedAvatar===r+1}),size:"sm",button:"",onClick:ht=>t.selectAvatar(r+1)},null,8,["src","class","onClick"]))),128))]),_:1})])]),t.languages&&Object.keys(t.languages).length>1?(e(),s("div",ut,[n("label",{for:"langKey",textContent:l(t.t$("settings.form.language"))},null,8,ct),d(n("select",{class:"form-control",id:"langKey",name:"langKey","onUpdate:modelValue":i[2]||(i[2]=a=>t.settingsAccount.langKey=a),"data-cy":"langKey"},[(e(!0),s(N,null,C(t.languages,(a,r)=>(e(),s("option",{value:r,key:`lang-${r}`},l(a.name),9,dt))),128))],512),[[S,t.settingsAccount.langKey]])])):o("",!0),n("button",{type:"submit",disabled:t.v$.settingsAccount.$invalid,class:"btn btn-primary",textContent:l(t.t$("settings.form.button")),"data-cy":"submit"},null,8,gt)],32)):o("",!0)])])])}const yt=R(H,[["render",vt],["__scopeId","data-v-30fbce9b"]]);export{yt as default};
