import{J as k,d as P,i as f,r as i,u as N,c as _,_ as x,j as L,t as r,s as t,y as o,D as a,I as q,K as c,L as g,M as d,q as E,m as R,k as s,F as M,v as U,l as z}from"./app-DpqgLFQi.js";import{u as I}from"./index-BKG5m1Gr.js";import{r as u,m as v,a as $,s as S,c as T}from"./index-DIr-dopr.js";import{f as V,L as D}from"./functions-BsjzqxxS.js";class Z{processRegistration(n){return k.post("api/register",n)}}const H=T.regex(/^[a-zA-Z0-9!$&*+=?^_`{|}~.-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$|^[_.@A-Za-z0-9-]+$/),j=P({compatConfig:{MODE:3},name:"Register",validations(){return{registerAccount:{login:{required:u,minLength:v(1),maxLength:$(50),pattern:H},password:{required:u,minLength:v(4),maxLength:$(254)},firstName:{required:u,minLength:v(4),maxLength:$(254)},lastName:{required:u,minLength:v(4),maxLength:$(254)}},confirmPassword:{required:u,minLength:v(4),maxLength:$(50),sameAsPassword:S(this.registerAccount.password)}}},setup(e){const n=f("loginService"),w=f("registerService",()=>new Z,!0),A=f("currentLanguage",()=>_(()=>navigator.language??"en"),!0),y=i(""),C=i(""),p=i(!1),h=i(null),l=i({login:void 0,password:void 0,avatar:void 0,lastName:void 0,firstName:void 0}),m=i([]),b=i(0);return{openLogin:()=>{n.openLogin()},currentLanguage:A,registerService:w,error:y,errorUserExists:C,success:p,confirmPassword:h,registerAccount:l,avatarImages:m,selectedAvatar:b,v$:I(),t$:N().t}},mounted(){this.loadAvatars()},methods:{loadAvatars(){this.avatarImages=V.getAllAvatarImgs(),console.log(this.avatarImages)},selectAvatar(e){this.selectedAvatar=e,this.registerAccount.avatar=e},register(){this.error=null,this.errorUserExists=null,this.registerAccount.langKey=this.currentLanguage,this.registerAccount.avatar===null&&(this.registerAccount.avatar=1),this.registerService.processRegistration(this.registerAccount).then(()=>{this.success=!0}).catch(e=>{this.success=null,e.response.status===400&&e.response.data.type===D?this.errorUserExists="ERROR":this.error="ERROR"})}}}),B={class:"container"},O={class:"row justify-content-center"},F={class:"toastify-container"},K=["textContent"],Y=["innerHTML"],G=["innerHTML"],J=["innerHTML"],Q={class:"row justify-content-center"},W={class:"form-group"},X=["textContent"],ee=["placeholder"],te={key:0},se=["textContent"],re=["textContent"],oe=["textContent"],ne=["textContent"],ae={class:"form-group"},le=["textContent"],ie=["placeholder"],de={key:0},me=["textContent"],ce=["textContent"],ge=["textContent"],ue={class:"form-group"},ve=["textContent"],$e=["placeholder"],pe={key:0},he=["textContent"],fe=["textContent"],we=["textContent"],Ae=["textContent"],ye={class:"form-group"},Ce=["textContent"],be=["placeholder"],Le={class:"form-group"},ke=["textContent"],Pe=["placeholder"],Ne={class:"form-group avatar-selector"},_e={class:"avatars"},xe=["disabled","textContent"];function qe(e,n,w,A,y,C){const p=L("b-avatar"),h=L("b-avatar-group");return s(),r("div",B,[t("div",O,[t("div",F,[t("h1",{textContent:o(e.t$("register.title")),id:"register-title","data-cy":"registerTitle"},null,8,K),e.success?(s(),r("div",{key:0,class:"alert alert-success",role:"alert",innerHTML:e.t$("register.messages.success")},null,8,Y)):a("",!0),e.error?(s(),r("div",{key:1,class:"alert alert-danger",role:"alert",innerHTML:e.t$("register.messages.error.fail")},null,8,G)):a("",!0),e.errorUserExists?(s(),r("div",{key:2,class:"alert alert-danger",role:"alert",innerHTML:e.t$("register.messages.error.userexists")},null,8,J)):a("",!0)])]),t("div",Q,[t("div",null,[e.success?a("",!0):(s(),r("form",{key:0,id:"register-form",name:"registerForm",onSubmit:n[5]||(n[5]=q(l=>e.register(),["prevent"])),"no-validate":""},[t("div",W,[t("label",{class:"form-control-label",for:"username",textContent:o(e.t$("global.form['username.label']"))},null,8,X),c(t("input",{type:"text",class:d(["form-control",{valid:!e.v$.registerAccount.login.$invalid,invalid:e.v$.registerAccount.login.$invalid}]),"onUpdate:modelValue":n[0]||(n[0]=l=>e.v$.registerAccount.login.$model=l),id:"username",name:"login",required:"",minlength:"1",maxlength:"50",pattern:"^[a-zA-Z0-9!#$&'*+=?^_`{|}~.-]+@?[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$",placeholder:e.t$("global.form['username.placeholder']"),"data-cy":"username"},null,10,ee),[[g,e.v$.registerAccount.login.$model]]),e.v$.registerAccount.login.$anyDirty&&e.v$.registerAccount.login.$invalid?(s(),r("div",te,[e.v$.registerAccount.login.required?a("",!0):(s(),r("small",{key:0,class:"form-text text-danger",textContent:o(e.t$("register.messages.validate.login.required"))},null,8,se)),e.v$.registerAccount.login.minLength?a("",!0):(s(),r("small",{key:1,class:"form-text text-danger",textContent:o(e.t$("register.messages.validate.login.minlength"))},null,8,re)),e.v$.registerAccount.login.maxLength?a("",!0):(s(),r("small",{key:2,class:"form-text text-danger",textContent:o(e.t$("register.messages.validate.login.maxlength"))},null,8,oe)),e.v$.registerAccount.login.pattern?a("",!0):(s(),r("small",{key:3,class:"form-text text-danger",textContent:o(e.t$("register.messages.validate.login.pattern"))},null,8,ne))])):a("",!0)]),t("div",ae,[t("label",{class:"form-control-label",for:"firstPassword",textContent:o(e.t$("global.form['newpassword.label']"))},null,8,le),c(t("input",{type:"password",class:d(["form-control",{valid:!e.v$.registerAccount.password.$invalid,invalid:e.v$.registerAccount.password.$invalid}]),id:"firstPassword",name:"password","onUpdate:modelValue":n[1]||(n[1]=l=>e.v$.registerAccount.password.$model=l),minlength:"4",maxlength:"50",required:"",placeholder:e.t$("global.form['newpassword.placeholder']"),"data-cy":"firstPassword"},null,10,ie),[[g,e.v$.registerAccount.password.$model]]),e.v$.registerAccount.password.$anyDirty&&e.v$.registerAccount.password.$invalid?(s(),r("div",de,[e.v$.registerAccount.password.required?a("",!0):(s(),r("small",{key:0,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.newpassword.required"))},null,8,me)),e.v$.registerAccount.password.minLength?a("",!0):(s(),r("small",{key:1,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.newpassword.minlength"))},null,8,ce)),e.v$.registerAccount.password.maxLength?a("",!0):(s(),r("small",{key:2,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.newpassword.maxlength"))},null,8,ge))])):a("",!0)]),t("div",ue,[t("label",{class:"form-control-label",for:"secondPassword",textContent:o(e.t$("global.form['confirmpassword.label']"))},null,8,ve),c(t("input",{type:"password",class:d(["form-control",{valid:!e.v$.confirmPassword.$invalid,invalid:e.v$.confirmPassword.$invalid}]),id:"secondPassword",name:"confirmPasswordInput","onUpdate:modelValue":n[2]||(n[2]=l=>e.v$.confirmPassword.$model=l),minlength:"4",maxlength:"50",required:"",placeholder:e.t$("global.form['confirmpassword.placeholder']"),"data-cy":"secondPassword"},null,10,$e),[[g,e.v$.confirmPassword.$model]]),e.v$.confirmPassword.$dirty&&e.v$.confirmPassword.$invalid?(s(),r("div",pe,[e.v$.confirmPassword.required?a("",!0):(s(),r("small",{key:0,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.confirmpassword.required"))},null,8,he)),e.v$.confirmPassword.minLength?a("",!0):(s(),r("small",{key:1,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.confirmpassword.minlength"))},null,8,fe)),e.v$.confirmPassword.maxLength?a("",!0):(s(),r("small",{key:2,class:"form-text text-danger",textContent:o(e.t$("global.messages.validate.confirmpassword.maxlength"))},null,8,we)),e.v$.confirmPassword.sameAsPassword?a("",!0):(s(),r("small",{key:3,class:"form-text text-danger",textContent:o(e.t$("global.messages.error.dontmatch"))},null,8,Ae))])):a("",!0)]),t("div",ye,[t("label",{class:"form-control-label",for:"firstName",textContent:o(e.t$("settings.form.firstname"))},null,8,Ce),c(t("input",{type:"text",class:d(["form-control",{valid:!e.v$.registerAccount.firstName.$invalid,invalid:e.v$.registerAccount.firstName.$invalid}]),id:"firstName",name:"firstName",placeholder:e.t$("settings.form['firstname.placeholder']"),"onUpdate:modelValue":n[3]||(n[3]=l=>e.v$.registerAccount.firstName.$model=l),minlength:"1",maxlength:"50",required:"","data-cy":"firstname"},null,10,be),[[g,e.v$.registerAccount.firstName.$model]])]),t("div",Le,[t("label",{class:"form-control-label",for:"lastName",textContent:o(e.t$("settings.form.lastname"))},null,8,ke),c(t("input",{type:"text",class:d(["form-control",{valid:!e.v$.registerAccount.lastName.$invalid,invalid:e.v$.registerAccount.lastName.$invalid}]),id:"lastName",name:"lastName",placeholder:e.t$("settings.form['lastname.placeholder']"),"onUpdate:modelValue":n[4]||(n[4]=l=>e.v$.registerAccount.lastName.$model=l),minlength:"1",maxlength:"50",required:"","data-cy":"lastname"},null,10,Pe),[[g,e.v$.registerAccount.lastName.$model]])]),t("div",Ne,[t("h3",null,o(e.t$("settings.form.selectavatar")),1),t("div",_e,[E(h,null,{default:R(()=>[(s(!0),r(M,null,U(e.avatarImages,(l,m)=>(s(),z(p,{key:m,src:l,class:d({selected:e.selectedAvatar===m+1}),size:"sm",button:"",onClick:b=>e.selectAvatar(m+1)},null,8,["src","class","onClick"]))),128))]),_:1})])]),t("button",{type:"submit",disabled:e.v$.$invalid,class:"btn btn-primary",textContent:o(e.t$("register.form.button")),"data-cy":"submit"},null,8,xe)],32)),n[6]||(n[6]=t("p",null,null,-1))])])])}const Ie=x(j,[["render",qe],["__scopeId","data-v-97810011"]]);export{Ie as default};
