import{d as F,i as y,r as u,w as b,j as m,l as c,m as v,f as L,k as n,t as r,F as T,v as j,s as A,q as R,E as h,y as w,U as C,g,D as f}from"./app-9yHSs_0k.js";import{_ as E}from"./CreateRecipeBookForm.vue_vue_type_script_setup_true_lang-C0RjFM7P.js";import{R as U}from"./recipe-book.service-D-CAdHjl.js";const D={key:0},H={class:"my-2 cursor-pointer d-flex justify-content-between"},M={key:1},z=F({__name:"MarkOrCreateRB",props:{isOpen:{type:Boolean},onClose:{type:Function},recipeId:{},onlyRecipeBookCreation:{type:Boolean}},setup(S){const d=y("alertService",()=>L(),!0),p=y("recipeBookService",()=>new U),a=u([]),i=u(!1),l=u(!1),o=S;b(()=>o.isOpen,t=>{l.value=t});async function I(t){await p().retrieveIsRecipeInList(t).then(s=>{a.value=s.data})}b(()=>l.value,t=>{t?I(o.recipeId):o.onClose()});function V(t){a.value=[...a.value,t]}function k(t){p().addOrRemoveRecipe(t,o.recipeId).then(s=>{s.status==201?d.showSuccess("Added successfully"):s.status==204&&d.showInfo("Removed successfully")}).catch(()=>{d.showError("Something went wrong! Try it again later.")})}function _(){i.value=!i.value}return(t,s)=>{const N=m("b-form-checkbox"),O=m("b-button"),x=m("b-modal");return n(),c(x,{title:"Save recipe to...",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),"hide-footer":"",centered:"",onHide:o.onClose},{default:v(()=>[i.value?f("",!0):(n(),r("div",D,[(n(!0),r(T,null,j(a.value,e=>(n(),r("div",{key:e.id},[A("div",H,[R(N,{checked:e==null?void 0:e.isRecipeInList,class:"cursor-pointer",onChange:()=>k(e.id)},{default:v(()=>[h(w(e==null?void 0:e.title)+" "+w(e==null?void 0:e.isRecipeInTheList),1)]),_:2},1032,["checked","onChange"]),e!=null&&e.isPrivate?(n(),c(C(g),{key:1,icon:"lock"})):(n(),c(C(g),{key:0,icon:"globe-americas",id:"id_public_icon"}))])]))),128)),t.onlyRecipeBookCreation?f("",!0):(n(),c(O,{key:0,class:"w-100 mt-2",variant:"secondary",onClick:_},{default:v(()=>s[1]||(s[1]=[h(" New recipe book ")])),_:1}))])),i.value&&!t.onlyRecipeBookCreation?(n(),r("div",M,[R(E,{"add-recipe-book-to-list":V,"toggle-new-recipe-b-visible":_})])):f("",!0)]),_:1},8,["modelValue","onHide"])}}});export{z as _};
