import{d as x,B as z,C as D,i as b,r as h,N as E,u as T,f as q,_ as K,j as F,t as a,s as t,I,y as s,K as r,L as u,M as v,D as i,Q as H,O as N,F as k,v as S,q as L,E as M,k as l}from"./app-9yHSs_0k.js";import{u as j}from"./index-CQAvtwPr.js";import{r as V,a as g,e as B,m as O}from"./index-DDs_-EvW.js";import{P as Z}from"./profile.service-C8NTs8-R.js";import{U as P}from"./user.model-DMQ3a_AX.js";import"./sorts-x2GDQqJR.js";const R=e=>e?/^[a-zA-Z0-9!$&*+=?^_`{|}~.-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$|^[_.@A-Za-z0-9-]+$/.test(e):!0,Q={userAccount:{login:{required:V,maxLength:g(254),pattern:R},firstName:{maxLength:g(50)},lastName:{maxLength:g(50)},email:{required:V,email:B,minLength:O(5),maxLength:g(50)}}},G=x({compatConfig:{MODE:3},name:"ProfileEdit",validations:Q,setup(){var C;const e=z(),n=D(),f=b("alertService",()=>q(),!0),d=b("profileService",()=>new Z,!0),A=()=>n.go(-1),p=h({...new P,authorities:[]}),m=h(!1),o=h([]),c=async()=>{const $=await d.retrieveAuthorities();o.value=$.data},w=async $=>{const U=await d.get($);p.value=U.data};c();const y=(C=e.params)==null?void 0:C.userId;return y&&w(y),{alertService:f,userAccount:p,isSaving:m,authorities:o,profileService:d,previousState:A,v$:j(),languages:E(),t$:T().t}},methods:{save(){this.isSaving=!0,this.userAccount.id?this.profileService.update(this.userAccount).then(e=>{this.returnToList(),this.alertService.showInfo(this.getToastMessageFromHeader(e))}).catch(e=>{this.isSaving=!0,this.alertService.showHttpError(e.response)}):this.profileService.create(this.userAccount).then(e=>{this.returnToList(),this.alertService.showSuccess(this.getToastMessageFromHeader(e))}).catch(e=>{this.isSaving=!0,this.alertService.showHttpError(e.response)})},returnToList(){this.isSaving=!1,this.previousState()},getToastMessageFromHeader(e){return this.t$(e.headers["x-szakdolgozatapp-alert"],{param:decodeURIComponent(e.headers["x-szakdolgozatapp-params"].replace(/\+/g," "))}).toString()}}}),J={class:"row justify-content-center"},W={class:"col-8"},X=["textContent"],Y=["hidden"],_=["textContent"],ee={class:"form-group"},te=["textContent"],ne={key:0},oe=["textContent"],se=["textContent"],ae=["textContent"],le={class:"form-group"},ie=["textContent"],re=["placeholder"],ue={key:0},de=["textContent"],me={class:"form-group"},ce=["textContent"],ve=["placeholder"],ge={key:0},pe=["textContent"],$e={class:"form-group"},he=["textContent"],fe=["placeholder"],Ae={key:0},ye=["textContent"],Ce=["textContent"],be=["textContent"],Ne=["textContent"],ke={class:"form-check"},Se={class:"form-check-label",for:"activated"},Le=["disabled"],Me=["textContent"],Ve={key:0,class:"form-group"},we=["textContent"],Ue=["value"],xe={class:"form-group"},ze=["textContent"],De=["value"],Ee=["textContent"],Te=["disabled"],qe=["textContent"];function Ke(e,n,f,d,A,p){const m=F("font-awesome-icon");return l(),a("div",J,[t("div",W,[e.userAccount?(l(),a("form",{key:0,name:"editForm",novalidate:"",onSubmit:n[9]||(n[9]=I(o=>e.save(),["prevent"]))},[t("h2",{id:"myUserLabel",textContent:s(e.t$("userManagement.home.createOrEditLabel"))},null,8,X),t("div",null,[t("div",{class:"form-group",hidden:!e.userAccount.id},[t("label",{textContent:s(e.t$("global.field.id"))},null,8,_),r(t("input",{type:"text",class:"form-control",name:"id","onUpdate:modelValue":n[0]||(n[0]=o=>e.userAccount.id=o),readonly:""},null,512),[[u,e.userAccount.id]])],8,Y),t("div",ee,[t("label",{class:"form-control-label",textContent:s(e.t$("userManagement.login"))},null,8,te),r(t("input",{type:"text",class:v(["form-control",{valid:!e.v$.userAccount.login.$invalid,invalid:e.v$.userAccount.login.$invalid}]),name:"login","onUpdate:modelValue":n[1]||(n[1]=o=>e.v$.userAccount.login.$model=o)},null,2),[[u,e.v$.userAccount.login.$model]]),e.v$.userAccount.login.$anyDirty&&e.v$.userAccount.login.$invalid?(l(),a("div",ne,[e.v$.userAccount.login.required?i("",!0):(l(),a("small",{key:0,class:"form-text text-danger",textContent:s(e.t$("entity.validation.required"))},null,8,oe)),e.v$.userAccount.login.maxLength?i("",!0):(l(),a("small",{key:1,class:"form-text text-danger",textContent:s(e.t$("entity.validation.maxlength",{max:50}))},null,8,se)),e.v$.userAccount.login.pattern?i("",!0):(l(),a("small",{key:2,class:"form-text text-danger",textContent:s(e.t$("entity.validation.patternLogin"))},null,8,ae))])):i("",!0)]),t("div",le,[t("label",{class:"form-control-label",for:"firstName",textContent:s(e.t$("userManagement.firstName"))},null,8,ie),r(t("input",{type:"text",class:v(["form-control",{valid:!e.v$.userAccount.firstName.$invalid,invalid:e.v$.userAccount.firstName.$invalid}]),id:"firstName",name:"firstName",placeholder:e.t$("settings.form['firstname.placeholder']"),"onUpdate:modelValue":n[2]||(n[2]=o=>e.v$.userAccount.firstName.$model=o)},null,10,re),[[u,e.v$.userAccount.firstName.$model]]),e.v$.userAccount.firstName.$anyDirty&&e.v$.userAccount.firstName.$invalid?(l(),a("div",ue,[e.v$.userAccount.firstName.maxLength?i("",!0):(l(),a("small",{key:0,class:"form-text text-danger",textContent:s(e.t$("entity.validation.maxlength",{max:50}))},null,8,de))])):i("",!0)]),t("div",me,[t("label",{class:"form-control-label",for:"lastName",textContent:s(e.t$("userManagement.lastName"))},null,8,ce),r(t("input",{type:"text",class:v(["form-control",{valid:!e.v$.userAccount.lastName.$invalid,invalid:e.v$.userAccount.lastName.$invalid}]),id:"lastName",name:"lastName",placeholder:e.t$("settings.form['lastname.placeholder']"),"onUpdate:modelValue":n[3]||(n[3]=o=>e.v$.userAccount.lastName.$model=o)},null,10,ve),[[u,e.v$.userAccount.lastName.$model]]),e.v$.userAccount.lastName.$anyDirty&&e.v$.userAccount.lastName.$invalid?(l(),a("div",ge,[e.v$.userAccount.lastName.maxLength?i("",!0):(l(),a("small",{key:0,class:"form-text text-danger",textContent:s(e.t$("entity.validation.maxlength",{max:50}))},null,8,pe))])):i("",!0)]),t("div",$e,[t("label",{class:"form-control-label",for:"email",textContent:s(e.t$("userManagement.email"))},null,8,he),r(t("input",{type:"email",class:v(["form-control",{valid:!e.v$.userAccount.email.$invalid,invalid:e.v$.userAccount.email.$invalid}]),id:"email",name:"email",placeholder:e.t$("global.form['email.placeholder']"),"onUpdate:modelValue":n[4]||(n[4]=o=>e.v$.userAccount.email.$model=o),email:"",required:""},null,10,fe),[[u,e.v$.userAccount.email.$model]]),e.v$.userAccount.email.$anyDirty&&e.v$.userAccount.email.$invalid?(l(),a("div",Ae,[e.v$.userAccount.email.required?i("",!0):(l(),a("small",{key:0,class:"form-text text-danger",textContent:s(e.t$("global.messages.validate.email.required"))},null,8,ye)),e.v$.userAccount.email.email?i("",!0):(l(),a("small",{key:1,class:"form-text text-danger",textContent:s(e.t$("global.messages.validate.email.invalid"))},null,8,Ce)),e.v$.userAccount.email.minLength?i("",!0):(l(),a("small",{key:2,class:"form-text text-danger",textContent:s(e.t$("global.messages.validate.email.minlength"))},null,8,be)),e.v$.userAccount.email.maxLength?i("",!0):(l(),a("small",{key:3,class:"form-text text-danger",textContent:s(e.t$("global.messages.validate.email.maxlength"))},null,8,Ne))])):i("",!0)]),t("div",ke,[t("label",Se,[r(t("input",{class:"form-check-input",disabled:e.userAccount.id===null,type:"checkbox",id:"activated",name:"activated","onUpdate:modelValue":n[5]||(n[5]=o=>e.userAccount.activated=o)},null,8,Le),[[H,e.userAccount.activated]]),t("span",{textContent:s(e.t$("userManagement.activated"))},null,8,Me)])]),e.languages&&Object.keys(e.languages).length>0?(l(),a("div",Ve,[t("label",{for:"langKey",textContent:s(e.t$("userManagement.langKey"))},null,8,we),r(t("select",{class:"form-control",id:"langKey",name:"langKey","onUpdate:modelValue":n[6]||(n[6]=o=>e.userAccount.langKey=o)},[(l(!0),a(k,null,S(e.languages,(o,c)=>(l(),a("option",{value:c,key:c},s(o.name),9,Ue))),128))],512),[[N,e.userAccount.langKey]])])):i("",!0),t("div",xe,[t("label",{textContent:s(e.t$("userManagement.profiles"))},null,8,ze),r(t("select",{class:"form-control",multiple:"",name:"authority","onUpdate:modelValue":n[7]||(n[7]=o=>e.userAccount.authorities=o)},[(l(!0),a(k,null,S(e.authorities,o=>(l(),a("option",{value:o,key:o},s(o),9,De))),128))],512),[[N,e.userAccount.authorities]])])]),t("div",null,[t("button",{type:"button",class:"btn btn-secondary",onClick:n[8]||(n[8]=o=>e.previousState())},[L(m,{icon:"ban"}),n[10]||(n[10]=M(" ")),t("span",{textContent:s(e.t$("entity.action.cancel"))},null,8,Ee)]),t("button",{type:"submit",disabled:e.v$.userAccount.$invalid||e.isSaving,class:"btn btn-primary"},[L(m,{icon:"save"}),n[11]||(n[11]=M(" ")),t("span",{textContent:s(e.t$("entity.action.save"))},null,8,qe)],8,Te)])],32)):i("",!0)])])}const Ze=K(G,[["render",Ke]]);export{Ze as default};
