import{d as V,i as d,r as c,B as A,C as B,u as L,f as I,c as D,_ as H,j as M,t as s,s as i,I as N,y as a,K as m,L as j,D as T,O as y,F as C,v as b,q as $,E as w,k as r}from"./app-9yHSs_0k.js";import{u as q}from"./index-CQAvtwPr.js";import{F as K}from"./favorite-relation.service-D7ARiYm2.js";import{U as G}from"./user.service-CvLjCrJx.js";import{R as J}from"./recipe.service-oeltP7nx.js";class P{constructor(t,n,u){this.id=t,this.user=n,this.recipe=u}}const Q=V({compatConfig:{MODE:3},name:"FavoriteRelationUpdate",setup(){var g;const e=d("favoriteRelationService",()=>new K),t=d("alertService",()=>I(),!0),n=c(new P),u=d("userService",()=>new G),p=c([]),R=d("recipeService",()=>new J),l=c([]),o=c(!1),k=d("currentLanguage",()=>D(()=>navigator.language??"en"),!0),h=A(),z=B(),F=()=>z.go(-1),E=async v=>{try{const f=await e().find(v);n.value=f}catch(f){t.showHttpError(f.response)}};(g=h.params)!=null&&g.favoriteRelationId&&E(h.params.favoriteRelationId),(()=>{u().retrieve().then(v=>{p.value=v.data}),R().retrieve().then(v=>{l.value=v.data})})();const{t:U}=L(),S=q({user:{},recipe:{}},n);return S.value.$validate(),{favoriteRelationService:e,alertService:t,favoriteRelation:n,previousState:F,isSaving:o,currentLanguage:k,users:p,recipes:l,v$:S,t$:U}},created(){},methods:{save(){this.isSaving=!0,this.favoriteRelation.id?this.favoriteRelationService().update(this.favoriteRelation).then(e=>{this.isSaving=!1,this.previousState(),this.alertService.showInfo(this.t$("szakdolgozatApp.favoriteRelation.updated",{param:e.id}))}).catch(e=>{this.isSaving=!1,this.alertService.showHttpError(e.response)}):this.favoriteRelationService().create(this.favoriteRelation).then(e=>{this.isSaving=!1,this.previousState(),this.alertService.showSuccess(this.t$("szakdolgozatApp.favoriteRelation.created",{param:e.id}).toString())}).catch(e=>{this.isSaving=!1,this.alertService.showHttpError(e.response)})}}}),W={class:"row justify-content-center"},X={class:"col-8"},Y=["textContent"],Z={key:0,class:"form-group"},O=["textContent"],_={class:"form-group"},x=["textContent"],ee=["value"],te={class:"form-group"},oe=["textContent"],ie=["value"],ae=["textContent"],ne=["disabled"],se=["textContent"];function re(e,t,n,u,p,R){const l=M("font-awesome-icon");return r(),s("div",W,[i("div",X,[i("form",{name:"editForm",novalidate:"",onSubmit:t[4]||(t[4]=N(o=>e.save(),["prevent"]))},[i("h2",{id:"szakdolgozatApp.favoriteRelation.home.createOrEditLabel","data-cy":"FavoriteRelationCreateUpdateHeading",textContent:a(e.t$("szakdolgozatApp.favoriteRelation.home.createOrEditLabel"))},null,8,Y),i("div",null,[e.favoriteRelation.id?(r(),s("div",Z,[i("label",{for:"id",textContent:a(e.t$("global.field.id"))},null,8,O),m(i("input",{type:"text",class:"form-control",id:"id",name:"id","onUpdate:modelValue":t[0]||(t[0]=o=>e.favoriteRelation.id=o),readonly:""},null,512),[[j,e.favoriteRelation.id]])])):T("",!0),i("div",_,[i("label",{class:"form-control-label",textContent:a(e.t$("szakdolgozatApp.favoriteRelation.user")),for:"favorite-relation-user"},null,8,x),m(i("select",{class:"form-control",id:"favorite-relation-user","data-cy":"user",name:"user","onUpdate:modelValue":t[1]||(t[1]=o=>e.favoriteRelation.user=o)},[t[5]||(t[5]=i("option",{value:null},null,-1)),(r(!0),s(C,null,b(e.users,o=>(r(),s("option",{value:e.favoriteRelation.user&&o.id===e.favoriteRelation.user.id?e.favoriteRelation.user:o,key:o.id},a(o.id),9,ee))),128))],512),[[y,e.favoriteRelation.user]])]),i("div",te,[i("label",{class:"form-control-label",textContent:a(e.t$("szakdolgozatApp.favoriteRelation.recipe")),for:"favorite-relation-recipe"},null,8,oe),m(i("select",{class:"form-control",id:"favorite-relation-recipe","data-cy":"recipe",name:"recipe","onUpdate:modelValue":t[2]||(t[2]=o=>e.favoriteRelation.recipe=o)},[t[6]||(t[6]=i("option",{value:null},null,-1)),(r(!0),s(C,null,b(e.recipes,o=>(r(),s("option",{value:e.favoriteRelation.recipe&&o.id===e.favoriteRelation.recipe.id?e.favoriteRelation.recipe:o,key:o.id},a(o.id),9,ie))),128))],512),[[y,e.favoriteRelation.recipe]])])]),i("div",null,[i("button",{type:"button",id:"cancel-save","data-cy":"entityCreateCancelButton",class:"btn btn-secondary",onClick:t[3]||(t[3]=o=>e.previousState())},[$(l,{icon:"ban"}),t[7]||(t[7]=w(" ")),i("span",{textContent:a(e.t$("entity.action.cancel"))},null,8,ae)]),i("button",{type:"submit",id:"save-entity","data-cy":"entityCreateSaveButton",disabled:e.v$.$invalid||e.isSaving,class:"btn btn-primary"},[$(l,{icon:"save"}),t[8]||(t[8]=w(" ")),i("span",{textContent:a(e.t$("entity.action.save"))},null,8,se)],8,ne)])],32)])])}const me=H(Q,[["render",re]]);export{me as default};
