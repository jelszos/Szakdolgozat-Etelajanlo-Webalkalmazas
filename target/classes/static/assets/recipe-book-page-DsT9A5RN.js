import{d as A,g as V,i as _,B as I,C as P,r as w,w as D,o as C,u as R,f as S,_ as q,j as i,t as y,s,q as a,y as p,m as l,I as E,F as L,v as j,k as z,E as B,l as U}from"./app-DpqgLFQi.js";import{R as M}from"./recipe-book.service-Df3-flx1.js";import{u as N}from"./date-format-rfZit4qg.js";import{R as G}from"./RecipeBookCard-B38BZ0JF.js";import{R as T}from"./recipe-book-relation.service-TGUZApoV.js";import{h as H}from"./header-bg-C45d2Xww.js";import"./functions-BsjzqxxS.js";const O=A({compatConfig:{MODE:3},name:"RecipeBookPage",components:{FontAwesomeIcon:V,RecipeBookCard:G},setup(){const e=N(),t=_("recipeBookService",()=>new M);_("recipeRelationService",()=>new T);const b=_("alertService",()=>S(),!0),d=I(),g=P(),r={title:"",description:"",page:d.query.page||0,tag:"",theme:""},c=w({totalElements:0,currentPage:parseInt(d.query.page)-1,totalPages:0});D(()=>d.query.page,o=>{console.log(d.query),c.value.currentPage=o?parseInt(o):0,r.page=o?parseInt(o):0,f(),g.push({query:{page:r.page,title:r.title,description:r.description}})});const v=()=>g.go(-1),h=w([]),f=async()=>{try{const o=await t().retrieve(r);console.log(o),h.value=o.data.content,c.value={...c,currentPage:o.data.number,totalElements:o.data.totalElements,totalPages:o.data.totalPages},await g.push({query:{page:r.page,title:r.title,description:r.description}})}catch(o){b.showHttpError(o.response)}};function u(){return"#"}C(async()=>{await f()});function m(o){const k=parseInt(o.target.text)-1;g.push({query:{...d.query,page:k}}),c.value.currentPage=k}return{...e,alertService:b,recipeBooks:h,searchFormData:r,paginationInfo:c,headerBg:H,pLinkGen:u,onPageChange:m,search:f,previousState:v,t$:R().t}},methods:{}}),J={class:"container"},K={class:"d-flex justify-content-center flex-column"},Q={class:"position-relative text-center my-5"},W=["textContent"],X={class:"mt-3"},Y={class:"icon-text"},Z={class:"text-slate-900",style:{"font-size":"22px","font-weight":"700"}},x={class:"mt-4 d-flex align-items-end custom-gap"},ee={class:"mb-3"},oe={class:"d-flex text-slate-900 align-items-center justify-content-between",style:{"font-size":"20px","font-weight":"500"}},te={class:"recipe-books"};function ae(e,t,b,d,g,r){const c=i("b-img"),v=i("b-badge"),h=i("font-awesome-icon"),f=i("b-alert"),u=i("b-form-input"),m=i("b-input-group"),o=i("b-form-group"),k=i("b-button"),$=i("recipe-book-card"),F=i("b-pagination-nav");return z(),y("div",J,[s("div",K,[s("div",Q,[a(c,{src:e.headerBg,class:"carousel-header-img"},null,8,["src"]),s("h1",{class:"carousel-header mb-0 position-relative",textContent:p(e.t$("szakdolgozatApp.recipeBook.home.title"))},null,8,W)]),a(v,{class:"ml-3"},{default:l(()=>t[5]||(t[5]=[B("Public recipe books")])),_:1}),a(f,{show:""},{default:l(()=>[a(h,{icon:"info-circle"}),B(" "+p(e.t$("szakdolgozatApp.recipeBook.home.subtitle")),1)]),_:1}),s("div",X,[s("div",Y,[s("p",Z,p(e.t$("szakdolgozatApp.recipeBook.search.info")),1)]),s("div",x,[a(o,{label:e.t$("szakdolgozatApp.recipeBook.search.labelField"),class:"flex-lg-grow-1 w-100"},{default:l(()=>[a(m,null,{default:l(()=>[a(u,{placeholder:e.t$("szakdolgozatApp.recipeBook.search.titleField"),modelValue:e.searchFormData.title,"onUpdate:modelValue":t[0]||(t[0]=n=>e.searchFormData.title=n)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),a(o,{label:e.t$("szakdolgozatApp.recipeBook.search.descriptionLabel"),class:"flex-lg-grow-1 w-100"},{default:l(()=>[a(m,null,{default:l(()=>[a(u,{placeholder:e.t$("szakdolgozatApp.recipeBook.search.descriptionField"),modelValue:e.searchFormData.description,"onUpdate:modelValue":t[1]||(t[1]=n=>e.searchFormData.description=n)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),a(o,{label:e.t$("szakdolgozatApp.recipeBook.search.themeLabel"),class:"flex-lg-grow-1 w-100"},{default:l(()=>[a(m,null,{default:l(()=>[a(u,{placeholder:e.t$("szakdolgozatApp.recipeBook.search.themeField"),modelValue:e.searchFormData.theme,"onUpdate:modelValue":t[2]||(t[2]=n=>e.searchFormData.theme=n)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),a(o,{label:e.t$("szakdolgozatApp.recipeBook.search.tagLabel"),class:"flex-lg-grow-1 w-100"},{default:l(()=>[a(m,null,{default:l(()=>[a(u,{placeholder:e.t$("szakdolgozatApp.recipeBook.search.tagField"),modelValue:e.searchFormData.tag,"onUpdate:modelValue":t[3]||(t[3]=n=>e.searchFormData.tag=n)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),s("div",ee,[a(k,{variant:"primary",onClick:t[4]||(t[4]=E(n=>e.search(),["prevent","stop"]))},{default:l(()=>[B(p(e.t$("szakdolgozatApp.recipeBook.card.search")),1)]),_:1})])])]),t[7]||(t[7]=s("div",{class:"w-100 divider my-5"},null,-1)),s("div",oe,[s("p",null,p(e.paginationInfo.currentPage+1)+". "+p(e.t$("global.page")),1),s("p",null,p(e.paginationInfo.totalElements)+" "+p(e.t$("szakdolgozatApp.recipeBook.entityTitle")),1)]),s("div",te,[(z(!0),y(L,null,j(e.recipeBooks,n=>(z(),U($,{key:n.id,"recipe-book":n},null,8,["recipe-book"]))),128)),t[6]||(t[6]=s("br",null,null,-1))])]),a(F,{"number-of-pages":e.paginationInfo.totalPages,page:e.paginationInfo.currentPage,"link-gen":e.pLinkGen,onclick:e.onPageChange,class:"mt-5",value:parseInt(e.paginationInfo.currentPage)+1,"hide-goto-end-buttons":""},null,8,["number-of-pages","page","link-gen","onclick","value"])])}const de=q(O,[["render",ae]]);export{de as default};
