import{d as F,u as L,i as R,r as p,w as g,j as v,l as r,m as f,U as d,f as N,k as o,t as u,F as T,v as j,s as E,q as k,E as C,y as _,g as w,D as b}from"./app-DpqgLFQi.js";import{_ as U}from"./CreateRecipeBookForm.vue_vue_type_script_setup_true_lang-OrL5rXBV.js";import{R as B}from"./recipe-book.service-Df3-flx1.js";const D={key:0},H={class:"my-2 cursor-pointer d-flex justify-content-between"},M={key:1},G=F({__name:"MarkOrCreateRB",props:{isOpen:{type:Boolean},onClose:{type:Function},recipeId:{},onlyRecipeBookCreation:{type:Boolean}},setup(z){const{t:s}=L(),m=R("alertService",()=>N(),!0),y=R("recipeBookService",()=>new B),i=p([]),l=p(!1),c=p(!1),n=z;g(()=>n.isOpen,t=>{c.value=t});async function I(t){await y().retrieveIsRecipeInList(t).then(a=>{i.value=a.data})}g(()=>c.value,t=>{t?I(n.recipeId):n.onClose()});function S(t){i.value=[...i.value,t]}function V(t){y().addOrRemoveRecipe(t,n.recipeId).then(a=>{a.status==201?m.showSuccess(s("szakdolgozatApp.recipeBook.modal.addSuccess")):a.status==204&&m.showInfo(s("szakdolgozatApp.recipeBook.modal.removeSuccess"))}).catch(()=>{m.showError(s("szakdolgozatApp.recipeBook.error"))})}function h(){l.value=!l.value}return(t,a)=>{const A=v("b-form-checkbox"),O=v("b-button"),x=v("b-modal");return o(),r(x,{title:d(s)("szakdolgozatApp.recipeBook.modal.modalTitle"),modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),"hide-footer":"",centered:"",onHide:n.onClose},{default:f(()=>[l.value?b("",!0):(o(),u("div",D,[(o(!0),u(T,null,j(i.value,e=>(o(),u("div",{key:e.id},[E("div",H,[k(A,{checked:e==null?void 0:e.isRecipeInList,class:"cursor-pointer",onChange:()=>V(e.id)},{default:f(()=>[C(_(e==null?void 0:e.title)+" "+_(e==null?void 0:e.isRecipeInTheList),1)]),_:2},1032,["checked","onChange"]),e!=null&&e.isPrivate?(o(),r(d(w),{key:1,icon:"lock"})):(o(),r(d(w),{key:0,icon:"globe-americas",id:"id_public_icon"}))])]))),128)),t.onlyRecipeBookCreation?b("",!0):(o(),r(O,{key:0,class:"w-100 mt-2",variant:"secondary",onClick:h},{default:f(()=>[C(_(d(s)("szakdolgozatApp.recipeBook.modal.newButton")),1)]),_:1}))])),l.value&&!t.onlyRecipeBookCreation?(o(),u("div",M,[k(U,{"add-recipe-book-to-list":S,"toggle-new-recipe-b-visible":h})])):b("",!0)]),_:1},8,["title","modelValue","onHide"])}}});export{G as _};
